// Nextflow configuration file for HPC environment

// Process executor - set to your HPC scheduler (SLURM, SGE, PBS, etc.)
process.executor = 'slurm'  // Change to 'sge', 'pbs', etc. if needed

// Default process configuration
process {
    // Set default process resource requirements
    cpus = 4
    memory = '40G'
    time = '6h'
    
    // Error handling
    errorStrategy = { task.attempt <= 3 ? 'retry' : 'finish' }
    maxRetries = 3
}

// Executor-specific configuration
executor {
    queueSize = 50  // Maximum number of jobs to submit simultaneously
    submitRateLimit = '10 sec'  // Wait time between job submissions
}

// Parameters that can be overridden from command line
params {
    input_dir = "${baseDir}/GeneFull_Ex50pAS/GeneFull_Ex50pAS"
    output_dir = "${baseDir}/output"
    frequency = 0.25
    cpus = 4
    memory = '40G'
    queue = 'gpu_high_mem'  // Default queue/partition
}

// Workflow report configuration
report {
    enabled = true
    overwrite = true
    file = "${params.output_dir}/reports/execution_report.html"
}

timeline {
    enabled = true
    overwrite = true
    file = "${params.output_dir}/reports/timeline.html"
}

trace {
    enabled = true
    overwrite = true
    file = "${params.output_dir}/reports/trace.txt"
}

dag {
    enabled = true
    overwrite = true
    file = "${params.output_dir}/reports/dag.svg"
}

// Profile configurations for different execution environments
profiles {
    standard {
        process.executor = 'local'
    }
    
    slurm {
        process.executor = 'slurm'
        process.queue = params.queue
    }
}
